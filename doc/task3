Задание со звездочкой*

Изучите работу примитива синхронизации sync.Cond и на его основе сделайте реализацию уведомления N “спящих” горутин.

Представьте себе систему, где N горутин постоянно берут задачи из внешнего сервиса X.

X упал или начал плохо работать (большое кол-во ошибок). Если мы продолжим опрашивать X, то будем только усугублять ситуацию, не давая возможности X восстановиться.

Поэтому мы делаем своего рода circuit breaker и оставляем только одну горутину, которая будет с некоторым периодом опрашивать доступность внешней системы, а все рабочие N горутин буду ждать.

Реализация может выглядеть следующим образом

Создаем worker pool с фиксированным числом горутин.
Каждая горутина пытается получить задачу из внешней системы. Если система недоступна, горутина переходит в состояние ожидания.
**Одна горутина** выполняет периодическую проверку доступности внешней системы.
Когда система становится доступной, проверяющая горутина уведомляет все ожидающие горутины о том, что они могут возобновить работу.